<!DOCTYPE html>
<html>
	<head>
		<meta charset="UTF-8">
		<meta name="renderer" content="webkit">
		<meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1">
		<meta name="viewport" content="width=device-width,initial-scale=1,minimum-scale=1,maximum-scale=1,user-scalable=no" />
		<title>ProductMS</title>
		<link rel="stylesheet" type="text/css" href="../../static/src/css/layui.css" />
		<!-- <link rel="stylesheet" type="text/css" href="../../static/admin/css/admin.css" /> -->
		<style type="text/css">
			/* .layui-form select{
				display: block;	
			} */
			body{
				padding: 10px 20px 170px 20px;
				/* padding-bottom: 180px; */
				/* background: #eee; */
			}
			.grid-demo{ line-height: 50px;  background-color: #79C48C; color: #fff;font-size: 16px;}
			.layui-card{
				box-shadow: 2px 2px 8px 2px rgba(50,50,50,0.25);
			}
			.layui-collapse{
				box-shadow: 2px 2px 8px 2px rgba(50,50,50,0.25);
			}
			.exc-import{
				float: right;
				margin-top: 6px;
			}
			.layui-table{
				margin-top:-15px;
			}
			.layui-table-body{
				overflow-x: hidden;
			}
		</style>
	</head>
	<body >
		<div class="wrap-container">
			<div class="layui-row layui-col-space10">
			    <div class="layui-col-md6">
			      	<div class="layui-card">
			  			<div class="layui-card-header grid-demo">
			  				部门管理
			  				<a class="layui-btn layui-btn-sm exc-import"><i class="layui-icon">&#xe621;</i>&nbsp;导入Excel</a>
			  			</div>
					  	<div class="layui-card-body">
					    	<!-- 部门管理 -->
				    		<table id="dept" lay-filter="dept"></table>
					  	</div>
					</div>
			    </div>

			    <div class="layui-col-md6">
			      	<div class="layui-collapse" lay-filter="test1">
					    <div class="layui-colla-item">
					        <h2 class="layui-colla-title grid-demo">项目组管理</h2>
					        <div class="layui-colla-content">
					            <table  id="dept2"></table>
					        </div>
					    </div>
					</div>
			    </div>

			    <div class="layui-col-md6">
			      	<div class="layui-card" >
				  		<div class="layui-card-header grid-demo">需求来源管理</div>
					  	<div class="layui-card-body">
					    	<!-- 需求来源管理 -->
				    		<table id="dept3"></table>
					  	</div>
					</div>
			    </div>

			    <div class="layui-col-md6">
			      	<div class="layui-card" >
			  			<div class="layui-card-header grid-demo">实施方式管理</div>
					  	<div class="layui-card-body">
					    	<!-- 实施方式管理 -->
				    		<table id="dept4"></table>
					  	</div>
					</div>
			    </div>

			    <div class="layui-col-md6">
			      	<div class="layui-card" >
			  			<div class="layui-card-header grid-demo">用户管理</div>
					  	<div class="layui-card-body">
					    	<!-- 用户管理 -->
				    		<table id="dept5"></table>
					  	</div>
					</div>
			    </div>

			    <div class="layui-col-md6">
			      	<div class="layui-card" >
			  			<div class="layui-card-header grid-demo">角色管理</div>
					  	<div class="layui-card-body">
					    	<!-- 角色管理 -->
				    		<table id="dept6"></table>
					  	</div>
					</div>
			    </div>

			    <div class="layui-col-md6">
			      	<div class="layui-card" >
			  			<div class="layui-card-header grid-demo">状态管理</div>
					  	<div class="layui-card-body">
					    	<!-- 状态管理 -->
				    		<table id="dept7"></table>
					  	</div>
					</div>
			    </div>

			    <div class="layui-col-md6">
			      	<div class="layui-collapse" lay-filter="test1">
					    <div class="layui-colla-item">
					        <h2 class="layui-colla-title grid-demo">权限管理</h2>
					        <div class="layui-colla-content">
					            <table  id="dept8"></table>
					        </div>
					    </div>
					</div>
			    </div>

			</div>
		</div>
		<script type="text/html" id="barDemo">
			<a class="layui-btn layui-btn-xs" lay-event="add"><i class="layui-icon">&#xe654;</i></a>
		  	<a class="layui-btn layui-btn-warm layui-btn-xs" lay-event="edit"><i class="layui-icon">&#xe642;</i></a>
		  	<a class="layui-btn layui-btn-danger layui-btn-xs" lay-event="del"><i class="layui-icon">&#xe640;</i></a>
		</script>
		<script src="../../static/src/layui.js" type="text/javascript" charset="utf-8"></script>
		<script type="text/javascript">
			layui.use(['jquery','table','layer'], function(){
  				var table = layui.table;
  				var $ = layui.jquery;
				var layer=layui.layer;
  				//部门管理表格渲染
				table.render({
				    elem: '#dept'
				    ,page: { //详细参数可参考 laypage 组件文档
				      curr: 5
				      ,groups: 1
				      ,first: false
				      ,last: false
				      ,layout: ['prev', 'page', 'next', 'count'] //自定义分页布局
				    }
				    ,height: 277
				    ,cellMinWidth: 80
				    //,skin: 'line'
				    // ,toolbar: true
				    ,cols: [[
				      {field: 'id', title: 'ID' }
				      ,{field: 'username', title: '名称'}
				      ,{title:'操作', align:'center', toolbar: '#barDemo'}
				      
				    ]]
				    ,data: [{
					    "id": "0"
					    ,"username": "个人部"
					},{
					    "id": "1"
					    ,"username": "金融科技部"      
					},{
					    "id": "2"
					    ,"username": "业务部"      
					},{
					    "id": "3"
					    ,"username": "托管业务部"      
					},{
					    "id": "4"
					    ,"username": "DCM"      
					},{
					    "id": "5"
					    ,"username": "运维"      
					}]
    				
				    ,page: true //是否显示分页
				    ,limits: [5,10]
				    ,limit: 5 //每页默认显示的数量

				});
				//部门管理工具条监听
				table.on('tool(dept)', function (obj) {  
					
	                var data = obj.data; //获得当前行数据
	                var layEvent = obj.event; //获得 lay-event 对应的值（也可以是表头的 event 参数对应的值）
	                var tr = obj.tr; //获得当前行 tr 的DOM对象

	                $('#edit_id').val(data.id);
                    $('#edit_name').val(data.username);
	                if (layEvent == 'edit'){
	                    var index = layer.open(
	                      {
	                        type: 2,
	                        title: '部门管理编辑',
	                        skin: 'layui-layer-molv',
                          	shadeClose: false,
                          	shade: 0.3,
                          	area: ['400px', '245px'],
                          	offset:100,
                          	content: 'dept-edit.html',//跳转的页面
                          	// cancel: function (index)
                          	// {
                              // $(".layui-laypage-btn").click();
                              //这里用于关闭Open时触发回调函数  刷新父页面数据  一定要引入Jquery
                          	// }
	 						success:function(layer,index){
	 							var body = layui.layer.getChildFrame('body', index);
	 							body.contents().find("#edit_id").val(data.id); 
                				body.contents().find("#edit_name").val(data.username);
	 						}

	                      });
	                   
	                }else if (layEvent == 'del'){ //删除数据{
	                    //删除数据
	                    // $.post("/Home/DeleteInfoById", { id: data.UserId }, function (ret)
	                    // {
	                    //     if (ret.code == "1") {
	                    //         layer.msg(ret.msg, { icon: 1, time: 1500 }, function () {
	                    //             obj.del();
	                    //             $(".layui-laypage-btn").click();
	                    //         });
	                    //     } else
	                    //     {
	                    //         layer.msg(ret.msg, { icon: 2, time: 1500 });
	                    //     }
	                    // });

	                    layer.confirm('是否确定删除该条记录', {offset: 150},function (index) {
	                    	obj.del();
	                    	layer.close(index);
                    	});

                	}else {
	                	//增加
	                	layer.open({
	                		type: 2,
	                        title: '部门管理编辑',
	                        skin: 'layui-layer-molv',
                          	shadeClose: false,
                          	shade: 0.3,
                          	offset:100,
                          	area: ['400px', '245px'],
                          	content: 'dept-edit.html'//跳转的页面
                        });	
	                }
	                    
	            });    

				table.render({
				    elem: '#dept2'
				    ,page: { //详细参数可参考 laypage 组件文档
				      curr: 5
				      ,groups: 1
				      ,first: false
				      ,last: false
				      ,layout: ['prev', 'page', 'next', 'count'] //自定义分页布局
				    }
				    ,height: 277
				    ,cellMinWidth: 80
				    //,skin: 'line'
				    // ,toolbar: true
				    ,cols: [[
				      {field: 'id', title: 'ID' }
				      ,{field: 'username', title: '名称'}
				      ,{title:'操作', align:'center', toolbar: '#barDemo'}
				      
				    ]]
				    ,data: [{
					    "id": "0"
					    ,"username": "个人部"
					},{
					    "id": "1"
					    ,"username": "金融科技部"      
					},{
					    "id": "2"
					    ,"username": "业务部"      
					},{
					    "id": "3"
					    ,"username": "托管业务部"      
					},{
					    "id": "4"
					    ,"username": "DCM"      
					},{
					    "id": "5"
					    ,"username": "运维"      
					}]
    				
				    ,page: true //是否显示分页
				    ,limits: [5,10]
				    ,limit: 5 //每页默认显示的数量

				});
	         
				table.render({
				    elem: '#dept3'
				    ,page: { //详细参数可参考 laypage 组件文档
				      curr: 5
				      ,groups: 1
				      ,first: false
				      ,last: false
				      ,layout: ['prev', 'page', 'next', 'count'] //自定义分页布局
				    }
				    ,height: 277
				    ,cellMinWidth: 80
				    //,skin: 'line'
				    // ,toolbar: true
				    ,cols: [[
				      {field: 'id', title: 'ID' }
				      ,{field: 'username', title: '名称'}
				      ,{title:'操作', align:'center', toolbar: '#barDemo'}
				      
				    ]]
				    ,data: [{
					    "id": "0"
					    ,"username": "个人部"
					},{
					    "id": "1"
					    ,"username": "金融科技部"      
					},{
					    "id": "2"
					    ,"username": "业务部"      
					},{
					    "id": "3"
					    ,"username": "托管业务部"      
					},{
					    "id": "4"
					    ,"username": "DCM"      
					},{
					    "id": "5"
					    ,"username": "运维"      
					}]
    				
				    ,page: true //是否显示分页
				    ,limits: [5,10]
				    ,limit: 5 //每页默认显示的数量

				});

				table.render({
				    elem: '#dept4'
				    ,page: { //详细参数可参考 laypage 组件文档
				      curr: 5
				      ,groups: 1
				      ,first: false
				      ,last: false
				      ,layout: ['prev', 'page', 'next', 'count'] //自定义分页布局
				    }
				    ,height: 277
				    ,cellMinWidth: 80
				    //,skin: 'line'
				    // ,toolbar: true
				    ,cols: [[
				      {field: 'id', title: 'ID' }
				      ,{field: 'username', title: '名称'}
				      ,{title:'操作', align:'center', toolbar: '#barDemo'}
				      
				    ]]
				    ,data: [{
					    "id": "0"
					    ,"username": "个人部"
					},{
					    "id": "1"
					    ,"username": "金融科技部"      
					},{
					    "id": "2"
					    ,"username": "业务部"      
					},{
					    "id": "3"
					    ,"username": "托管业务部"      
					},{
					    "id": "4"
					    ,"username": "DCM"      
					},{
					    "id": "5"
					    ,"username": "运维"      
					}]
    				
				    ,page: true //是否显示分页
				    ,limits: [5,10]
				    ,limit: 5 //每页默认显示的数量

				});

				table.render({
				    elem: '#dept2'
				    ,page: { //详细参数可参考 laypage 组件文档
				      curr: 5
				      ,groups: 1
				      ,first: false
				      ,last: false
				      ,layout: ['prev', 'page', 'next', 'count'] //自定义分页布局
				    }
				    ,height: 277
				    ,cellMinWidth: 100
				    //,skin: 'line'
				    // ,toolbar: true
				    ,cols: [[
				      {field: 'id', title: 'ID' }
				      ,{field: 'username', title: '名称'}
				      ,{title:'操作', align:'center', toolbar: '#barDemo'}
				      
				    ]]
				    ,data: [{
					    "id": "0"
					    ,"username": "个人部"
					},{
					    "id": "1"
					    ,"username": "金融科技部"      
					},{
					    "id": "2"
					    ,"username": "业务部"      
					},{
					    "id": "3"
					    ,"username": "托管业务部"      
					},{
					    "id": "4"
					    ,"username": "DCM"      
					},{
					    "id": "5"
					    ,"username": "运维"      
					}]
    				
				    ,page: true //是否显示分页
				    ,limits: [5,10]
				    ,limit: 5 //每页默认显示的数量

				});

			});
			
		</script>

		<script>
		    layui.use(['element', 'layer'], function(){
		        var element = layui.element;
		        var layer = layui.layer;

		        //监听折叠
		        element.on('collapse(test1)', function(data){
		            // layer.msg('展开状态：'+ data.show);
		        });
		    });
		</script>
	</body>

</html>